## シナリオJSON仕様書
jsonディレクトリに配置するjsonファイルの形式は以下の通り。
### 選択肢を表示する場合
~~~json
{
  "text" : [
           "表示文字列1",
           "表示文字列2..."
           ],
  "option":["選択肢A","選択肢B"],
  "jump" : ["ジャンプ先A","ジャンプ先B"]
}
~~~
### 選択肢を表示せず、Enterキーで先に進める場合
~~~json
{
  "text" : [
           "表示文字列1",
           "表示文字列2..."
           ],
  "option":[""],
  "jump" : ["ジャンプ先"]
}
~~~
`text`アイテムには一文字ずつ表示する対象の文字列を配列形式で入力する。この文字列中にいくつかのコマンドを埋め込むことができる。埋め込むことのできるコマンドは後述。
### text内で使えるコマンド   
`[bg=背景へのパス]`・・・ここから表示する背景画像を指定する。  
`[bgm=オーディオファイルへのパス]`・・・ここから再生する音楽へのパスを指定する。  
`[img=画像へのパス]`・・・ここから表示する画像へのパスを指定する。  
`[spd=時間]`・・・一文字あたりを表示するのにかかる時間、つまり文字列を表示するスピード。単位はミリ秒。最初のｶﾀﾏﾘでこれが指定されなかった場合デフォルトで50が設定される。  
*これらはテキストのｶﾀﾏﾘ一つにつき一つ指定できる。*  
**注意:** text内で`"`の文字を使うときはエスケープを絶対に! エスケープの書き方: `\"`。また、ここでいうパスは、JSONフォルダから見た相対パスである。
#### サンプル
~~~json
{
  "text" : [
           "[spd=100]おはようございます",
           "お元気ですか",
           "朝食に何を食べたいですか?次の中から選択してください"
           ],
  "option":["イカフライのレモン煮","ハンバーグ","納豆"],
  "jump" : ["ikahurai.json","hamburg.json","natto.json"]
}
~~~
#### 上記サンプルでの動作は?
textは、画面にｶﾀﾏﾘごとで表示されます。上記の例ではまず一文字ごとの間隔が100ミリ秒で「おはようございます」と表示します。そこで、Enterキーを押すと次は「お元気ですか」と表示されます。さらにEnterキーを押すと、「朝食に何を食べたいですか?次の中から選択してください」と表示します。  
そこでEnterキーを押すと、選択肢として「イカフライのレモン煮」、「ハンバーグ」、「納豆」が選択肢として出現し、矢印キーで選択するための画面になります。  
上下キーで選び、Enterを押すと、それぞれ、「json」フォルダにある「ikahurai.json」、「hamburg.json」、「natto.json」のシナリオファイルを読み込みます。

### optionとjumpの指定の仕方
`option`には、選択項目の設定をできるようにする。optionで一つしか指定しなかった場合、Enterキーで先に進めるようにする。もちろん、選択肢を表示させたくない場合は空文字を指定する。Enterキーで進む先は`jump`で指定する。
`jump`には、JSONファイルとHTMLファイルを指定できるようにする。
プログラム側で正規表現で拡張子`.json`で終わるものと`.html`で終わるもので分ける。
`.json`が指定されたときには、指定されたJSONシナリオファイルを読み込み、最初と同じような挙動をするようにする。
`.html`が指定されたときは、指定されたHTMLファイルにジャンプするようにする。  
*`.js`も指定できるようにする予定。*



**このように作っていけたらいいなと思います。**

## Developer向け
選択肢減らすシナリオは、textにジャンプ先、jumpの１つ目にlast:とかき、2つ目にすべて選択し終わった後のジャンプ先を書く。詳しくはgame/json/select_all_1.jsonを参照。